<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>XDI Graphs in IPFS - Rebooting the Web of Trust</title>
<meta name="description" content="RWOT Index - Drafts, Documents, Photos, Topics, Advance Readings, and Final Whitepapers">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Rebooting the Web of Trust">
<meta property="og:title" content="XDI Graphs in IPFS">
<meta property="og:url" content="http://localhost:4000/rwot-dir/_pages/rwot2-id2020/topics-and-advance-readings/XDI-Graphs-in-IPFS/">




  <meta property="og:image" content="http://localhost:4000/rwot-dir/assets/images/rebooting-the-web-of-trust-header-pages.jpeg">



  <meta name="twitter:site" content="@didecentral">
  <meta name="twitter:title" content="XDI Graphs in IPFS">
  <meta name="twitter:description" content="RWOT Index - Drafts, Documents, Photos, Topics, Advance Readings, and Final Whitepapers">
  <meta name="twitter:url" content="http://localhost:4000/rwot-dir/_pages/rwot2-id2020/topics-and-advance-readings/XDI-Graphs-in-IPFS/">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:4000/rwot-dir/assets/images/rebooting-the-web-of-trust-header-pages.jpeg">
  

  







  

  


<link rel="canonical" href="http://localhost:4000/rwot-dir/_pages/rwot2-id2020/topics-and-advance-readings/XDI-Graphs-in-IPFS/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "DIDecentral",
      "url": "http://localhost:4000/rwot-dir",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/rwot-dir/feed.xml" type="application/atom+xml" rel="alternate" title="Rebooting the Web of Trust Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/rwot-dir/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/rwot-dir/"><img src="/rwot-dir/assets/images/wot-logo.png" alt=""></a>
        
        <a class="site-title" href="/rwot-dir/">Drafts, Documents, Literature</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://decentralized-id.com/" target="_blank" rel="noopener noreferrer">DIDecentral</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  











<div class="page__hero" style=" ">
  
    <img src="/rwot-dir/assets/images/rebooting-the-web-of-trust-header-pages.jpeg" alt="XDI Graphs in IPFS" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
      
      
      
      
    
    
      

<nav class="nav__list">
  <h3 class="nav__title" style="padding-left: 0;">Rebooting the Web of Trust</h3>
  <input id="ac-toc" name="accordion-toc" type="checkbox">
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/rwot-dir/rwot1-sf/"><span class="nav__sub-title">RWoT1-SF</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot1-sf/draft-documents/" class="">Draft Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot1-sf/event-documents/" class="">Event Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot1-sf/final-documents/" class="">Final Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot1-sf/supporting-files/" class="">Supporting Files</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot1-sf/topics-and-advance-readings/" class="">Topics and Advance Readings</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/rwot-dir/rwot2-id2020/"><span class="nav__sub-title">RWoT2-ID2020</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot2-id2020/draft-documents/" class="">Draft Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot2-id2020/event-documents/" class="">Event Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot2-id2020/final-documents/" class="">Final Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot2-id2020/supporting-files/" class="">Supporting Files</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot2-id2020/topics-and-advance-readings/" class="">Topics and Advance Readings</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/rwot-dir/rwot3-sf/"><span class="nav__sub-title">RWoT3-SF</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot3-sf/draft-documents/" class="">Draft Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot3-sf/event-documents/" class="">Event Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot3-sf/final-documents/" class="">Final Documents</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot3-sf/supporting-files/" class="">Supporting Files</a></li>
          
            
            

            
            

            <li><a href="/rwot-dir/rwot3-sf/topics-and-advance-readings/" class="">Topics and Advance Readings</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="XDI Graphs in IPFS">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">XDI Graphs in IPFS
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>XDI (eXtensible Data Interchange) is a technology for modeling, storing and connecting any kind of personal and organizational data.
Its underlying data model is a graph consisting of nodes and directed arcs.
XDI is well-suited for digital identity that is distributed and heterogeneous.
Through the use of mappings and connectors, XDI can be used to model even data that is not itself natively in XDI format (e.g. a Facebook profile, a government ID, or a record in a corporate database).
Traditionally, XDI assumes a network topology that involves service providers and endpoints, e.g. a connection can be established between an individual and an organization through their respective endpoints.</p>

<p>IPFS (InterPlanetary File System) is a distributed data store built on a combination of peer-to-peer technologies such as DHT, BitTorrent, and others.
It provides built-in support for certain higher-level data constructs, such as file systems, or Git histories.
At its core it is very flexible in terms of the type of data it can store.
IPFS uses a graph model where nodes and links represent data.
This aspect of IPFS is also known as IPLD (InterPlanetary Linked Data).</p>

<p>The following is an exercise to use IPFS as a data store for XDI graphs, in other words to map the XDI data model to the IPFS data model.</p>

<h2 id="mapping">Mapping</h2>

<p>Even though both XDI and IPFS use graphs for expressing all data, there are differences that have to be considered for a mapping.</p>

<p>Data in IPFS is immutable and stored in content-addressable nodes.
Every node in the graph is identified by a hash which is calculated from the node’s data plus the node’s links to other nodes.
Links consist of a name plus the hash of the target node.
A node’s identifier therefore transitively depends on all nodes it links to at all depths.
This means that the IPFS graph is a directed acyclic graph (Merkle DAG), in which cycles are not possible.</p>

<p>The XDI graph model knows two types of nodes (context nodes, literal nodes) and three types of arcs (contextual arcs, relational arcs, literal arcs).
Contextual arcs and literal arcs form the “backbone” of the graph, and relational arcs can be added between any two context nodes.</p>

<p>Example XDI graph with 4 contextual arcs, 2 literal arcs, and 1 relational arc (using the XDI DISPLAY serialization format):</p>

<p>//=markus
  //=drummond
  =markus//&lt;#email&gt;
  =markus//&lt;#tel&gt;
  =markus&lt;#email&gt;/&amp;/”markus@danubetech.com”
  =markus&lt;#tel&gt;/&amp;/”+43 664 3154848”
  =markus/#friend/=drummond</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>___               ___               ___               ___    |   | ----------&gt; |   | ----------&gt; |   | - - - - - &gt; |   | "markus@danubetech.com"    |___|  =markus    |___|   &lt;#email&gt;  |___|     &amp;       |___|
 |                v |
 |                v |
 |        #friend v |               ___               ___
 |                v  ------------&gt; |   | - - - - - &gt; |   | "+43 664 3154848"
 |                v       &lt;#tel&gt;   |___|     &amp;       |___|
 |                ___ 
  -------------&gt; |   | 
     =drummond   |___|
</code></pre></div></div>

<p>If one considers only the contextual and literal arcs of an XDI graph (in this example, leaving out the <code class="highlighter-rouge">#friend</code> relational arc, then the graph would be a tree.</p>

<p>In this case, the mapping to IPFS is straight-forward and can be done using the following rules:</p>
<ol>
  <li>Every XDI context node is modeled as an IPFS node.</li>
  <li>Every XDI contextual arc is modeled as an IPFS link. The link’s name is the identifier of the XDI contextual arc, e.g. <code class="highlighter-rouge">=markus</code>.</li>
  <li>Every XDI literal node and literal arc are modeled as data in the IPFS node corresponding to the XDI context node containing the XDI literal node. The key of this entry is <code class="highlighter-rouge">&amp;</code>. The value of this entry is the XDI literal value, e.g. <code class="highlighter-rouge">"markus@danubetech.com"</code>.</li>
</ol>

<p>Using these rules, the above XDI graph can be stored in IPFS as follows:</p>

<p># ./ipfs object data QmePRoNxYBM52rX4Lz9uoUEnbzoFJrdcoQFEmn1iU3Gu3N
  {}</p>

<p># ./ipfs object links QmePRoNxYBM52rX4Lz9uoUEnbzoFJrdcoQFEmn1iU3Gu3N
  QmPFFA37U3nEHVSqsPwKaW6217kCmhjS7xDPam8f2jh3Gz 0 =markus <br>
  QmStX2p9x3AV9Gdp1ArLk7bLNzZft5WCBxSLCp4NdbU3z4 0 =drummond</p>

<p># ./ipfs object links QmPFFA37U3nEHVSqsPwKaW6217kCmhjS7xDPam8f2jh3Gz
  QmeRY6if7tCE3Ftnk7RVWoq9ohshBm87FS1DM1RvEuyxzt 0 &lt;#email&gt; 
  QmQ6Jwb2uVwBYbaPRwSr61wZYCu6fVS1FX4L2fU4tB9RgW 0 &lt;#tel&gt;</p>

<p># ./ipfs object data QmeRY6if7tCE3Ftnk7RVWoq9ohshBm87FS1DM1RvEuyxzt
  {“&amp;”:”markus@danubetech.com”}</p>

<p># ./ipfs object data QmQ6Jwb2uVwBYbaPRwSr61wZYCu6fVS1FX4L2fU4tB9RgW
  {“&amp;”:”+43 664 3154848”}</p>

<p>The only remaining question is then how XDI relational arcs can be modeled. Simply modeling them as IPFS links is not possible because of the constraints of the Merkle DAG structure. We explore two options:</p>

<p><strong>Option #1</strong>: We can model an XDI relational arc as data in the IPFS node corresponding to the XDI context node that is the source of the XDI relational arc.</p>

<p>Using this approach, the XDI relational arc can be stored in IPFS as follows:</p>

<p># ./ipfs object data QmPFFA37U3nEHVSqsPwKaW6217kCmhjS7xDPam8f2jh3Gz
  {“/#friend”:[“=drummond”]}</p>

<p>The downside of this approach is that graphs may become inconsistent, e.g. the XDI context node <code class="highlighter-rouge">=markus</code> may indicate an XDI relational arc <code class="highlighter-rouge">#friend</code> to an XDI context node <code class="highlighter-rouge">=drummond</code>, but this XDI context node may not actually exist in the graph.</p>

<p><strong>Option #2</strong>: We can model an XDI relational arc as an IPFS node with two IPFS links that point to the IPFS nodes corresponding to the XDI context nodes that are the source and target of the XDI relational arc.</p>

<p>Using this approach, the XDI relational arc can be stored in IPFS as follows:</p>

<p># ./ipfs object data Qmebb2jZqQjfTwmhdZsY8nBdb8zs1rHLNRhPL9Kb2kw8Z2
  /#friend
  # ./ipfs object links Qmebb2jZqQjfTwmhdZsY8nBdb8zs1rHLNRhPL9Kb2kw8Z2
  QmPFFA37U3nEHVSqsPwKaW6217kCmhjS7xDPam8f2jh3Gz 0 source 
  QmStX2p9x3AV9Gdp1ArLk7bLNzZft5WCBxSLCp4NdbU3z4 0 target</p>

<p>The downside of this approach seems to be that is impossible to actually find XDI relational arcs while navigating the graph structure, unless additional overhead such as an index of all XDI relational arcs is introduced.</p>

<h2 id="xdi-peer-roots-for-ipfsipns">XDI Peer Roots for IPFS/IPNS</h2>

<p>XDI peer roots are used to identify the roots of XDI graphs at their specific locations in a network.</p>

<p>For IPFS, we introduce the following scheme for XDI peer roots:</p>

<p><code class="highlighter-rouge">($ipfs)(=!:ipfs:QmePRoNxYBM52rX4Lz9uoUEnbzoFJrdcoQFEmn1iU3Gu3N)</code></p>

<p>This is an XDI peer root identifying an XDI graph who’s root node is stored in IPFS at the node with hash <code class="highlighter-rouge">QmePRoNxYBM52rX4Lz9uoUEnbzoFJrdcoQFEmn1iU3Gu3N</code>.</p>

<p>Since IPFS uses content-addressing, this XDI peer root would change every time the XDI graph is modified.</p>

<p>This is where IPNS can help, which introduces a mutable mapping to IPFS nodes which are themselves immutable.</p>

<p>For IPNS, we introduce the following scheme for XDI peer roots:</p>

<p><code class="highlighter-rouge">($ipfs)(=!:ipns:QmX2H9dimN3Bit5Xf2HNyE5TnknPR7bXhxpEUXSgbu2snW)</code></p>

<p>This is an XDI peer root that remains constant even when the XDI graph in IPFS is modified.</p>

<h2 id="motivation">Motivation</h2>

<p>Since XDI is an abstract model for distributed identity, XDI graphs stored in IPFS can seamlessly integrate with XDI graphs stored elsewhere, e.g. graphs at personal clouds endpoints, or data that is not itself natively in XDI format.</p>

<p>For example, Markus could link his e-mail address in his personal cloud to an e-mail address stored in IPFS using the following XDI reference link:</p>

<p><code class="highlighter-rouge">=markus&lt;#email&gt;/$ref/($ipfs)(=!:ipns:QmX2H9dimN3Bit5Xf2HNyE5TnknPR7bXhxpEUXSgbu2snW)=markus&lt;#email&gt;</code></p>

<p>XDI-enabled applications and services trying to discover Markus’ e-mail address would now know that they can retrieve it from the distributed IPFS store instead of having to interact with a traditional XDI endpoint.</p>

<h2 id="implementation">Implementation</h2>

<p>An experimental Java implementation of this mapping is available at:</p>

<p>https://github.com/projectdanube/xdi2-ipfs</p>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=didecentral&amp;text=XDI+Graphs+in+IPFS%20http%3A%2F%2Flocalhost%3A4000%2Frwot-dir%2F_pages%2Frwot2-id2020%2Ftopics-and-advance-readings%2FXDI-Graphs-in-IPFS%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter" target="_blank" rel="noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Frwot-dir%2F_pages%2Frwot2-id2020%2Ftopics-and-advance-readings%2FXDI-Graphs-in-IPFS%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Flocalhost%3A4000%2Frwot-dir%2F_pages%2Frwot2-id2020%2Ftopics-and-advance-readings%2FXDI-Graphs-in-IPFS%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn" target="_blank" rel="noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<input type="search" id="search" aria-placeholder="Enter your search term..." class="search-input" tabindex="-1" placeholder="Enter your search term...">
    <div id="results" class="results"></div>
</div>

      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="mailto:identitydecentralized@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://decentralized-id.com" rel="noopener noreferrer" target="_blank"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
        
          <li><a href="https://twitter.com/didecentral" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/didecentral" rel="noopener noreferrer" target="_blank"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/rwot-dir/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">© 2019 DIDecentral. Powered by <a href="https://jekyllrb.com" rel="noopener noreferrer" target="_blank">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="noopener noreferrer" target="_blank">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/rwot-dir/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>




<script src="/rwot-dir/assets/js/lunr/lunr.min.js"></script>
<script src="/rwot-dir/assets/js/lunr/lunr-store.js"></script>
<script src="/rwot-dir/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
